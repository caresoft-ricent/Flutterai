server:
  port: 8000

spring:
  jackson:
    property-naming-strategy: SNAKE_CASE
  datasource:
    # NOTE: Java backend uses ONE shared DB at repo root: flutterai.db
    # To force a specific DB path, set env APP_DB_PATH or config app.db.path.
    # This value is kept mainly for documentation and can be overridden by SPRING_DATASOURCE_URL.
    url: jdbc:sqlite:./flutterai.db?busy_timeout=10000
    driver-class-name: org.sqlite.JDBC
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.community.dialect.SQLiteDialect
        format_sql: false
    open-in-view: false

app:
  # Share uploads with the Python backend. Resolved with backend/ and ../backend/ fallbacks.
  uploads-dir: backend/uploads
  # Optional override: absolute/relative DB path. If empty, backend/... and ../backend/... will be auto-detected.
  # db:
  #   path: flutterai.db
  ai:
    # Feature flag: when true, /v1/ai/chat will try calling Doubao (Ark) and fall back to rules on errors.
    # Can be overridden by env: APP_AI_ENABLED=true
    enabled: false
    # Match Python's config location. Resolved with backend/ and ../backend/ fallbacks.
    local-config-path: backend/config.json

    # LLM HTTP timeouts (ms). Increase request-timeout-ms to reduce fallbacks,
    # but keep it < Flutter Dio receiveTimeout (currently 20s).
    llm:
      connect-timeout-ms: 5000
      request-timeout-ms: 12000
